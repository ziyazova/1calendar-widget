<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chess Widget Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        .iframe-container {
            border: 2px solid #ddd;
            border-radius: 12px;
            overflow: hidden;
            margin: 20px 0;
            background: white;
        }
        .iframe-container.small {
            width: 300px;
            height: 300px;
        }
        .iframe-container.medium {
            width: 500px;
            height: 400px;
        }
        .iframe-container.large {
            width: 600px;
            height: 500px;
        }
        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        .controls {
            margin: 20px 0;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        button {
            background: #667EEA;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        button:hover {
            background: #5A67D8;
        }
        .status {
            margin: 10px 0;
            padding: 10px;
            background: #f0f9ff;
            border: 1px solid #0ea5e9;
            border-radius: 6px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚ôüÔ∏è Chess Widget Test</h1>
        <p>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞—Ö–º–∞—Ç–Ω–æ–≥–æ –≤–∏–¥–∂–µ—Ç–∞ –≤ iframe —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Ä–∞–∑–º–µ—Ä–∞</p>
        
        <div class="controls">
            <h3>–†–∞–∑–º–µ—Ä—ã iframe:</h3>
            <button onclick="changeSize('small')">–ú–∞–ª–µ–Ω—å–∫–∏–π (300x300)</button>
            <button onclick="changeSize('medium')">–°—Ä–µ–¥–Ω–∏–π (500x400)</button>
            <button onclick="changeSize('large')">–ë–æ–ª—å—à–æ–π (600x500)</button>
            <div class="status" id="status">–¢–µ–∫—É—â–∏–π —Ä–∞–∑–º–µ—Ä: –°—Ä–µ–¥–Ω–∏–π (500x400)</div>
        </div>

        <div class="iframe-container medium" id="iframeContainer">
            <iframe 
                src="http://localhost:5173/embed/test" 
                title="Chess Widget"
                id="chessIframe">
            </iframe>
        </div>

        <div class="status">
            <h4>üìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ ResizeObserver:</h4>
            <div id="resizeInfo">–û–∂–∏–¥–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç iframe...</div>
        </div>
    </div>

    <script>
        let resizeCount = 0;
        let lastHeight = 0;

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç iframe
        window.addEventListener('message', function(event) {
            if (event.data && event.data.type === 'embed-size') {
                resizeCount++;
                const newHeight = event.data.height;
                const heightChanged = newHeight !== lastHeight;
                lastHeight = newHeight;
                
                document.getElementById('resizeInfo').innerHTML = `
                    ‚úÖ –°–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—É—á–µ–Ω–æ: ${resizeCount}<br>
                    üìè –¢–µ–∫—É—â–∞—è –≤—ã—Å–æ—Ç–∞: ${newHeight}px<br>
                    üîÑ –í—ã—Å–æ—Ç–∞ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å: ${heightChanged ? '–î–∞' : '–ù–µ—Ç'}<br>
                    ‚è∞ –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: ${new Date().toLocaleTimeString()}
                `;
            }
        });

        function changeSize(size) {
            const container = document.getElementById('iframeContainer');
            const status = document.getElementById('status');
            
            // –£–¥–∞–ª—è–µ–º –≤—Å–µ –∫–ª–∞—Å—Å—ã —Ä–∞–∑–º–µ—Ä–æ–≤
            container.className = 'iframe-container';
            
            // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π –∫–ª–∞—Å—Å —Ä–∞–∑–º–µ—Ä–∞
            container.classList.add(size);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å
            const sizes = {
                small: '–ú–∞–ª–µ–Ω—å–∫–∏–π (300x300)',
                medium: '–°—Ä–µ–¥–Ω–∏–π (500x400)',
                large: '–ë–æ–ª—å—à–æ–π (600x500)'
            };
            status.textContent = `–¢–µ–∫—É—â–∏–π —Ä–∞–∑–º–µ—Ä: ${sizes[size]}`;
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞
            resizeCount = 0;
            document.getElementById('resizeInfo').innerHTML = '–û–∂–∏–¥–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç iframe...';
        }
    </script>
</body>
</html> 